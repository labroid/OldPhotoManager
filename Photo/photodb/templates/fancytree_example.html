{% extends "layout.html" %}
{% block body %}
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>Fancytree - Example</title>

  <script src="../static/lib/jquery.js" type="text/javascript"></script>
  <script src="../static/lib/jquery-ui.custom.js" type="text/javascript"></script>

  <link href="../static/src/skin-xp/ui.fancytree.css" rel="stylesheet" type="text/css">
  <script src="../static/src/jquery.fancytree.js" type="text/javascript"></script>

  <script type="text/javascript">

  $(function() {
      var FT = $.ui.fancytree;
      FT.debug("Using fancytree " + FT.version);

      /* Load tree from Ajax JSON
     */
    $("#tree2").fancytree({
      debugLevel: 2, // 0:quiet, 1:normal, 2:debug
      source: {
        url: "/db_init"
      },
      lazyLoad: function(event, data){
        data.result = $.ajax({
          url: "/db",
          data: {"parent": data.node.key},
          dataType: "json"
        });
      }
    });
  })
  </script>
</head>

<body class="example">
  <h1>Photo Explorer</h1>

  <p class="description">
    Using database <b>{{database}}</b> hosted on <b>{{host}}</b>, collection <b>{{collection}}</b> <br>
  </p>

<p>Photo directory tree:</p>
  <div id="tree2" data-source="ajax" class="sampletree">
  </div>

</body>
</html>
{% endblock %}